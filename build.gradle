apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'application'

mainClassName = 'com.jramoyo.weather.log.LogFileReader'
applicationName = 'read-log'

repositories {
    jcenter()
}

dependencies {
    compile group: 'org.apache.commons', name: 'commons-lang3', version: '3.6'
    testCompile group: 'junit', name: 'junit', version: '4.12'
    testCompile 'org.hamcrest:hamcrest-core:1.3'
}

task createExtraRunApp(type: CreateStartScripts) {
    mainClassName = "com.jramoyo.weather.log.LogFileGenerator"
    classpath = startScripts.classpath
    outputDir = startScripts.outputDir
    applicationName = 'generate-log'
}

applicationDistribution.into("bin") {
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
    from(createExtraRunApp)
    fileMode = 0755
}

distZip {
    archiveName 'weather-observations.zip'
}

distTar {
    archiveName 'weather-observations.tar'
}